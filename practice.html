<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All_Career - Learn Coding</title>
    <link rel="icon" href="String_Theory.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@500;700;800&family=Plus+Jakarta+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #020617;
            --bg-surface: #0f172a;
            --bg-glass: rgba(15, 23, 42, 0.95);
            --primary: #3b82f6;
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            --border: rgba(255, 255, 255, 0.08);
            --easy: #00b8a3; --medium: #ffc01e; --hard: #ff375f;
            --freq-bar-fill: #2cbb5d;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Plus Jakarta Sans', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; 
            background-image: radial-gradient(circle at top center, rgba(59, 130, 246, 0.1), transparent 40%);
        }

        /* --- STICKY BAR CONTAINER --- */
        .filter-bar-container {
            position: sticky; top: 0; z-index: 100;
            padding: 10px 20px;
            display: flex; justify-content: center;
            background: transparent;
            height: 70px; 
            box-sizing: border-box;
        }

        .filter-bar {
            width: 100%; max-width: 1000px;
            display: flex; gap: 15px;
            background: var(--bg-glass); backdrop-filter: blur(10px);
            padding: 12px 20px; border-radius: 50px;
            border: 1px solid var(--border);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            align-items: center;
        }

        .btn-back {
            text-decoration: none; color: var(--text-muted); font-weight: 600; font-size: 0.9rem;
            padding: 8px 16px; border: 1px solid var(--border); border-radius: 20px;
            transition: 0.2s; white-space: nowrap; margin-left: auto;
        }
        .btn-back:hover { color: white; border-color: white; }

        /* LAYOUT (Scroll Fix) */
        .layout { 
            display: flex; 
            flex: 1; 
            overflow: hidden; 
            height: calc(100vh - 70px); 
            max-width:1400px; margin: 0 auto; width:100%; 
        }
        
        /* SIDEBAR SCROLL */
        .sidebar {
            width: 320px; 
            background: rgba(15, 23, 42, 0.5); 
            border-right: 1px solid var(--border);
            display: flex; flex-direction: column; flex-shrink: 0;
            height: 100%;
        }
        .search-box { padding: 15px; border-bottom: 1px solid var(--border); }
        .search-box input {
            width: 100%; padding: 10px; border-radius: 8px;
            background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: white; outline: none;
        }
        
        .company-list { 
            flex: 1; 
            overflow-y: auto; /* Independent Scroll */
            padding: 10px; 
        }
        
        .company-item {
            padding: 10px 12px; margin-bottom: 6px; cursor: pointer; border-radius: 8px; color: var(--text-muted);
            transition: 0.2s; display: flex; justify-content: space-between; align-items: center; border: 1px solid transparent;
        }
        .company-item:hover { background: rgba(255,255,255,0.05); color: white; }
        .company-item.active { background: rgba(59, 130, 246, 0.15); color: white; border-color: var(--primary); }
        
        .company-info { display: flex; align-items: center; gap: 10px; font-weight: 500; font-size: 0.9rem; }
        .sidebar-logo { width: 20px; height: 20px; border-radius: 4px; background: white; object-fit: contain; padding: 2px; }
        .count-tag { font-size: 0.7rem; background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 10px; }

        /* CONTENT SCROLL */
        .content { 
            flex: 1; 
            padding: 0; 
            overflow-y: auto; 
            display: flex; flex-direction: column; 
            position: relative; 
            height: 100%;
            background-image: radial-gradient(circle at top right, rgba(59, 130, 246, 0.05), transparent 40%);
            padding-bottom: 150px; 
        }
        .welcome-msg { text-align: center; margin-top: 100px; color: var(--text-muted); }

        /* --- COMPACT CONTENT HEADER --- */
        .company-header-bar {
            padding: 10px 25px; 
            border-bottom: 1px solid var(--border);
            background: rgba(2, 6, 23, 0.95); 
            backdrop-filter: blur(10px);
            position: sticky; top: 0; z-index: 5;
            display: flex; align-items: center; justify-content: space-between;
            min-height: 60px; 
        }
        .company-title-row { display: flex; align-items: center; gap: 12px; }
        .company-name-large { font-family: 'Outfit', sans-serif; font-size: 1.4rem; color: var(--text-main); font-weight: 700; }
        
        .toolbar { display: flex; gap: 10px; align-items: center; }
        .filter-select {
            background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: var(--text-muted);
            padding: 6px 12px; border-radius: 6px; outline: none; cursor: pointer; font-family: inherit; font-size: 0.85rem;
        }
        .filter-select option { background-color: #0f172a; color: white; padding: 10px; }
        .filter-select:hover { color: white; border-color: rgba(255,255,255,0.3); }

        .table-container { padding: 20px 30px; }
        
        .topic-section { margin-bottom: 30px; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
        .topic-header {
            background: rgba(255, 255, 255, 0.05); padding: 10px 20px; font-size: 0.95rem; font-weight: 700; color: var(--text-main);
            border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 10px;
        }
        
        .problem-table { width: 100%; border-collapse: collapse; }
        .problem-table th {
            text-align: left; padding: 10px 15px; color: var(--text-muted); border-bottom: 1px solid var(--border); font-size: 0.8rem; text-transform: uppercase; font-weight: 600;
        }
        .problem-table td { padding: 10px 15px; border-bottom: 1px solid rgba(255,255,255,0.03); font-size: 0.9rem; vertical-align: middle; }
        .problem-table tr:hover { background: rgba(255,255,255,0.04); }
        .problem-link { color: var(--text-main); text-decoration: none; font-weight: 500; display: block; }
        .problem-link:hover { color: var(--primary); }

        .diff-tag { padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; }
        .diff-Easy { color: var(--easy); background: rgba(0, 184, 163, 0.1); border: 1px solid rgba(0, 184, 163, 0.2); }
        .diff-Medium { color: var(--medium); background: rgba(255, 192, 30, 0.1); border: 1px solid rgba(255, 192, 30, 0.2); }
        .diff-Hard { color: var(--hard); background: rgba(255, 55, 95, 0.1); border: 1px solid rgba(255, 55, 95, 0.2); }
        .text-Easy { color: var(--easy); } .text-Medium { color: var(--medium); } .text-Hard { color: var(--hard); }
        .freq-bar-container { width: 100%; height: 8px; background: #262626; border-radius: 10px; overflow: hidden; }
        .freq-bar-fill { height: 100%; background: #2cbb5d; border-radius: 10px; }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-deep); }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    </style>
</head>
<body>

    <div class="filter-bar-container">
        <div class="filter-bar">
            <div style="color:var(--text-muted); font-weight:600; margin-right:auto; font-size:1.1rem; display:flex; align-items:center; gap:8px;">
               <span style="color:var(--primary);">//</span> LEARN CODING
            </div>
            <a href="index.html" class="btn-back">Hub</a>
        </div>
    </div>

    <div class="layout">
        <aside class="sidebar">
            <div class="search-box">
                <input type="text" id="compSearch" placeholder="Search Company..." onkeyup="filterCompanies()">
            </div>
            <div class="company-list" id="companyList"></div>
        </aside>

        <main class="content" id="mainContent">
            <div class="welcome-msg">
                <h2>Select a category or company to start</h2>
                <p>Data sourced from LeetCode frequency lists</p>
            </div>
        </main>
    </div>

    <script src="leetcode_data.js"></script>
    <script src="logos.js"></script>
    <script src="top150.js"></script>

    <script>
        const companyListEl = document.getElementById('companyList');
        const mainContentEl = document.getElementById('mainContent');
        let companies = [];
        let currentCompanyName = "";

        function getLogoData(name) {
            let cleanName = name.replace(/\(.*\)/, '').replace(/ India/i, '').trim();
            let domain = '';
            if (typeof domainMap !== 'undefined' && domainMap[cleanName]) {
                domain = domainMap[cleanName];
            } else {
                domain = cleanName.toLowerCase().replace(/ /g, '').replace(/[^\w]/g, '') + ".com";
            }
            return {
                cleanName: cleanName,
                clearbit: `https://logo.clearbit.com/${domain}`,
                google: `https://www.google.com/s2/favicons?domain=${domain}&sz=128`
            };
        }

        // --- RENDER SIDEBAR ---
        function renderSidebar(list) {
            companyListEl.innerHTML = '';
            
            // 1. TOP 150 INTERVIEW QUESTIONS (Yellow)
            const topDiv = document.createElement('div');
            topDiv.className = 'company-item';
            topDiv.style.border = "1px solid #fbbf24";
            topDiv.onclick = () => loadTop150(topDiv);
            topDiv.innerHTML = `
                <div class="company-info">
                    <div style="width:20px; height:20px; background:#fbbf24; border-radius:4px; display:flex; align-items:center; justify-content:center; color:black; font-weight:bold; font-size:0.8rem;">★</div>
                    <span style="color:#fbbf24; font-weight:bold;">Top 150 Interview Qs</span>
                </div>
                <span class="count-tag" style="background:#fbbf24; color:black;">150</span>
            `;
            companyListEl.appendChild(topDiv);

            // 2. MASTER LIST / ALL QUESTIONS (Purple) - NEW!
            const allDiv = document.createElement('div');
            allDiv.className = 'company-item';
            allDiv.style.border = "1px solid #a855f7"; // Purple accent
            // This links to the other file we created
            allDiv.onclick = () => window.location.href = 'all_questions.html'; 
            allDiv.innerHTML = `
                <div class="company-info">
                    <div style="width:20px; height:20px; background:#a855f7; border-radius:4px; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:1rem;">∞</div>
                    <span style="color:#a855f7; font-weight:bold;">All Questions</span>
                </div>
                <span class="count-tag" style="background:#a855f7; color:white;">Master</span>
            `;
            companyListEl.appendChild(allDiv);

            // 3. COMPANY LIST
            list.forEach(name => {
                const count = leetcodeData[name] ? leetcodeData[name].length : 0;
                const div = document.createElement('div');
                div.className = 'company-item';
                div.onclick = () => loadCompany(name, div);
                const logoData = getLogoData(name);
                div.innerHTML = `
                    <div class="company-info">
                        <div style="position:relative; width:20px; height:20px;">
                            <img src="${logoData.clearbit}" class="sidebar-logo" style="position:absolute; top:0; left:0; width:100%; height:100%;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <img src="${logoData.google}" class="sidebar-logo" style="display:none; position:absolute; top:0; left:0; width:100%; height:100%;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <div style="display:none; width:100%; height:100%; background:#334155; color:white; border-radius:4px; align-items:center; justify-content:center; font-weight:bold; font-size:0.7rem;">${logoData.cleanName.charAt(0)}</div>
                        </div>
                        <span>${name}</span>
                    </div>
                    <span class="count-tag">${count}</span>
                `;
                companyListEl.appendChild(div);
            });
        }

        // --- LOAD TOP 150 ---
        function loadTop150(element) {
             document.querySelectorAll('.company-item').forEach(el => el.classList.remove('active'));
             element.classList.add('active');
             currentCompanyName = null;

             const grouped = {};
             const topicOrder = [
                "Arrays & Hashing", "Two Pointers", "Sliding Window", "Stack", 
                "Binary Search", "Linked List", "Trees", "Tries", "Heap", 
                "Backtracking", "Graphs", "Advanced Graphs", 
                "1-D Dynamic Programming", "2-D Dynamic Programming", 
                "Greedy", "Intervals", "Math & Geometry", "Bit Manipulation"
             ];
             
             top150Data.forEach(p => {
                 if (!grouped[p.topic]) grouped[p.topic] = [];
                 grouped[p.topic].push(p);
             });

             // Compact Header for Top 150
             let html = `
                <div class="company-header-bar" style="background:rgba(251, 191, 36, 0.1); border-bottom-color: rgba(251, 191, 36, 0.2);">
                    <div class="company-title-row">
                        <div style="width:32px; height:32px; background:#fbbf24; border-radius:8px; display:flex; align-items:center; justify-content:center; color:black; font-weight:bold; font-size:1rem;">★</div>
                        <div class="company-name-large" style="color:#fbbf24; font-size: 1.3rem;">Must Do Questions</div>
                    </div>
                </div>
                <div class="table-container">
             `;

             topicOrder.forEach(topic => {
                 if (grouped[topic]) {
                     html += `
                        <div class="topic-section">
                            <div class="topic-header">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                                ${topic}
                            </div>
                            <table class="problem-table">
                                <thead>
                                    <tr>
                                        <th width="50">ID</th>
                                        <th>Problem Name</th>
                                        <th width="100">Difficulty</th>
                                        <th width="100">Link</th>
                                    </tr>
                                </thead>
                                <tbody>
                     `;
                     
                     grouped[topic].forEach(p => {
                         html += `
                            <tr>
                                <td style="color:#64748b;">${p.id}</td>
                                <td><a href="${p.url}" target="_blank" class="problem-link">${p.title}</a></td>
                                <td><span class="diff-tag diff-${p.difficulty}">${p.difficulty}</span></td>
                                <td><a href="${p.url}" target="_blank" style="color:var(--primary);">Solve ></a></td>
                            </tr>
                         `;
                     });

                     html += `</tbody></table></div>`;
                 }
             });

             html += `</div>`;
             mainContentEl.innerHTML = html;
        }

        // --- LOAD COMPANY ---
        function loadCompany(name, element) {
            currentCompanyName = name;
            
            document.querySelectorAll('.company-item').forEach(el => el.classList.remove('active'));
            if(element) element.classList.add('active');

            const logoData = getLogoData(name);

            // COMPACT HEADER FOR COMPANY
            const html = `
                <div class="company-header-bar">
                    <div class="company-title-row">
                        <div style="width:36px; height:36px; background:white; border-radius:8px; padding:3px; display:flex; align-items:center; justify-content:center;">
                            <img src="${logoData.clearbit}" style="width:100%; height:100%; object-fit:contain;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <img src="${logoData.google}" style="display:none; width:100%; height:100%; object-fit:contain;" onerror="this.style.display='none';">
                        </div>
                        <div class="company-name-large" style="font-size: 1.3rem;">${name}</div>
                    </div>

                    <div class="toolbar">
                        <input type="text" id="probSearch" class="filter-select" style="width:180px; color:white;" placeholder="Search..." onkeyup="applyProblemFilters()">
                        
                        <select id="diffFilter" class="filter-select" onchange="applyProblemFilters()">
                            <option value="All">All Difficulties</option>
                            <option value="Easy">Easy</option>
                            <option value="Medium">Medium</option>
                            <option value="Hard">Hard</option>
                        </select>

                        <select id="sortFilter" class="filter-select" onchange="applyProblemFilters()">
                            <option value="freq">Sort: Frequency</option>
                            <option value="accept">Sort: Acceptance</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table class="problem-table">
                        <thead>
                            <tr>
                                <th width="40">#</th>
                                <th>Title</th>
                                <th width="120">Acceptance</th>
                                <th width="100">Difficulty</th>
                                <th width="150">Frequency</th>
                            </tr>
                        </thead>
                        <tbody id="problemTableBody"></tbody>
                    </table>
                </div>
            `;
            
            mainContentEl.innerHTML = html;
            applyProblemFilters();
        }

        // --- FILTER LOGIC ---
        function applyProblemFilters() {
            if (!currentCompanyName || !leetcodeData[currentCompanyName]) return;

            const problems = [...leetcodeData[currentCompanyName]]; 
            const search = document.getElementById('probSearch').value.toLowerCase();
            const diff = document.getElementById('diffFilter').value;
            const sort = document.getElementById('sortFilter').value;
            const tbody = document.getElementById('problemTableBody');
            
            tbody.innerHTML = '';

            let filtered = problems.filter(p => {
                const matchesSearch = p.title.toLowerCase().includes(search);
                const matchesDiff = diff === 'All' || p.difficulty === diff;
                return matchesSearch && matchesDiff;
            });

            if (sort === 'freq') {
                filtered.sort((a, b) => (b.frequency || 0) - (a.frequency || 0));
            } else if (sort === 'accept') {
                const getVal = (str) => parseFloat((str || "0").replace('%', ''));
                filtered.sort((a, b) => getVal(b.acceptance) - getVal(a.acceptance));
            }

            if (filtered.length === 0) {
                tbody.innerHTML = `<tr><td colspan="5" style="text-align:center; padding:30px; color:var(--text-muted);">No questions found</td></tr>`;
                return;
            }

            filtered.forEach((p, idx) => {
                const freq = p.frequency || 0;
                let barColor = '#94a3b8'; 
                if(freq > 70) barColor = '#2cbb5d'; 
                else if(freq > 40) barColor = '#fbbf24';

                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td style="color:var(--text-muted);">${idx + 1}</td>
                    <td><a href="${p.url}" target="_blank" class="problem-link">${p.title}</a></td>
                    <td style="color:var(--text-muted);">${p.acceptance || 'N/A'}</td>
                    <td class="text-${p.difficulty}" style="font-weight:600;">${p.difficulty}</td>
                    <td>
                        <div class="freq-bar-container">
                            <div class="freq-bar-fill" style="width:${freq}%; background:${barColor};"></div>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function filterCompanies() {
            const term = document.getElementById('compSearch').value.toLowerCase();
            const filtered = companies.filter(c => c.toLowerCase().includes(term));
            renderSidebar(filtered);
        }

        try {
            if (typeof leetcodeData !== 'undefined') {
                companies = Object.keys(leetcodeData).sort();
                renderSidebar(companies);
            } else {
                companyListEl.innerHTML = '<div style="padding:20px; text-align:center;">Error: leetcode_data.js missing</div>';
            }
        } catch (e) { console.error(e); }

    </script>
</body>
</html>